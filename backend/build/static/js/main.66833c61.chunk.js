(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{72:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(20),a=n.n(c),s=n(6),u=n(14),i=n(1),o=function(){var t=Object(s.c)((function(t){return t.blogs.sort((function(t,e){return e.likes-t.likes}))}));return Object(i.jsx)("div",{className:"blogDiv",style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},children:t.map((function(t){return Object(i.jsxs)("p",{children:[Object(i.jsx)(u.b,{to:"/blogs/".concat(t.id),children:t.title})," by ",t.author]},t.id)}))})},l=n(74),d=function(){var t=Object(s.c)((function(t){return t.users.allUsers}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Users"}),Object(i.jsxs)(l.a,{striped:!0,children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{}),Object(i.jsx)("th",{children:"blogs created"})]})}),Object(i.jsx)("tbody",{children:t.map((function(t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsx)(u.b,{to:"/users/".concat(t.id),children:t.username})}),Object(i.jsx)("td",{children:t.blogs.length})]},t.id)}))})]})]})},j=n(7),b=function(){var t=Object(s.c)((function(t){return t.notifications})),e=t.content,n=t.display,r=t.success,c={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,display:n},a=Object(j.a)(Object(j.a)({},c),{},{color:"red"}),u=r?c:a;return Object(i.jsx)("div",{className:"error",style:u,children:e})},p=n(13),f=function(t){var e=Object(r.useState)(!1),n=Object(p.a)(e,2),c=n[0],a=n[1],s={display:c?"none":""},u={display:c?"":"none"},o=function(){a(!c)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{style:s,children:Object(i.jsx)("button",{onClick:o,children:t.buttonLabel})}),Object(i.jsxs)("div",{style:u,className:"togglableContent",children:[t.children,Object(i.jsx)("button",{onClick:o,children:"cancel"})]})]})},O=n(2),h=n.n(O),x=n(3),v=n(40),g=n(15),m=n.n(g),y="/api/blogs",w=null,k={getAll:function(){return m.a.get(y).then((function(t){return t.data}))},setToken:function(t){w="bearer ".concat(t)},create:function(){var t=Object(x.a)(h.a.mark((function t(e){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:w}},t.next=3,m.a.post(y,e,n).catch((function(t){return t.response}));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),likeBlog:function(){var t=Object(x.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.put("".concat(y,"/").concat(e.id),Object(j.a)(Object(j.a)({},e),{},{likes:e.likes+1}));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteBlog:function(){var t=Object(x.a)(h.a.mark((function t(e){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:w}},t.next=3,m.a.delete("".concat(y,"/").concat(e),n).catch((function(t){return t.response}));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addComment:function(){var t=Object(x.a)(h.a.mark((function t(e,n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post("".concat(y,"/").concat(e,"/comments"),{comment:n}).catch((function(t){return t.response}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},I={content:"",success:!0,display:"none"},S=function(t,e){return function(){var n=Object(x.a)(h.a.mark((function n(r){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:clearTimeout(window.notificationTimeoutID),window.notificationTimeoutID=setTimeout((function(){r({type:"CLEAR_NOTIFICATION"})}),5e3),r({type:"SET_NOTIFICATION",notification:t,success:e});case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_NOTIFICATION":return{content:e.notification,success:e.success,display:""};case"CLEAR_NOTIFICATION":return{content:"",display:"none"};default:return t}},C=function(t){return function(){var e=Object(x.a)(h.a.mark((function e(n){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.create(t);case 2:if(201!==(r=e.sent).status){e.next=9;break}return c=r.data,n({type:"NEW_BLOG",data:c}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(t,e){return function(){var n=Object(x.a)(h.a.mark((function n(r){var c,a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k.addComment(t,e);case 2:201===(c=n.sent).status?(a=c.data,r({type:"ADD_COMMENT",data:a}),r(S("Comment Added",!0))):r(S("Blog not found",!1));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT_BLOGS":return e.data;case"NEW_BLOG":return[].concat(Object(v.a)(t),[e.data]);case"LIKE":return t.map((function(t){return t.id===e.data.id?e.data:t}));case"DELETE_BLOG":return t.filter((function(t){return t.id!==e.data}));case"ADD_COMMENT":return t.map((function(t){return t.id===e.data.id?e.data:t}));default:return t}},N=function(){var t=Object(r.useState)(""),e=Object(p.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(""),u=Object(p.a)(a,2),o=u[0],l=u[1],d=Object(r.useState)(""),j=Object(p.a)(d,2),b=j[0],f=j[1],O=Object(s.b)(),v=function(){var t=Object(x.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(C(e));case 2:n=t.sent,O(n?S("added blog ".concat(e.title),!0):S("Unable to add blog",!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v({title:n,author:o,url:b}),f(""),l(""),c("")},children:[Object(i.jsx)("h2",{children:"Create new blog"}),Object(i.jsxs)("div",{children:["title:",Object(i.jsx)("input",{id:"title",type:"text",value:n,name:"title",onChange:function(t){var e=t.target;return c(e.value)}})]}),Object(i.jsxs)("div",{children:["author:",Object(i.jsx)("input",{id:"author",type:"author",value:o,name:"author",onChange:function(t){var e=t.target;return l(e.value)}})]}),Object(i.jsxs)("div",{children:["url:",Object(i.jsx)("input",{id:"url",type:"text",value:b,name:"url",onChange:function(t){var e=t.target;return f(e.value)}})]}),Object(i.jsx)("button",{id:"submit-blog",type:"submit",children:"Create"})]})},U={login:function(){var t=Object(x.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post("/api/login",e).catch((function(t){return t.response}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A={getAllUsers:function(){var t=Object(x.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/users");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},B={allUsers:[],loggedIn:null},_=function(t,e){return function(){var n=Object(x.a)(h.a.mark((function n(r){var c,a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U.login({username:t,password:e});case 2:if(200!==(c=n.sent).status){n.next=11;break}return a=c.data,k.setToken(a.token),window.localStorage.setItem("loggedBlogappUser",JSON.stringify(a)),r({type:"LOGIN_USER",data:a}),n.abrupt("return",!0);case 11:return console.log("failed login"),n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN_USER":return Object(j.a)(Object(j.a)({},t),{},{loggedIn:e.data});case"LOGOUT_USER":return Object(j.a)(Object(j.a)({},t),{},{loggedIn:null});case"SET_USERS":return Object(j.a)(Object(j.a)({},t),{},{allUsers:e.data});default:return t}},R=function(){var t=Object(r.useState)(""),e=Object(p.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(""),u=Object(p.a)(a,2),o=u[0],l=u[1],d=Object(s.b)(),j=function(){var t=Object(x.a)(h.a.mark((function t(e){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,d(_(n,o));case 3:r=t.sent,d(r?S("Login successful",!0):S("Login failed",!1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Log In To Application"}),Object(i.jsxs)("form",{onSubmit:j,children:[Object(i.jsxs)("div",{children:["username",Object(i.jsx)("input",{id:"username",type:"text",value:n,name:"Username",onChange:function(t){var e=t.target;return c(e.value)}})]}),Object(i.jsxs)("div",{children:["password",Object(i.jsx)("input",{id:"password",type:"password",value:o,name:"Password",onChange:function(t){var e=t.target;return l(e.value)}})]}),Object(i.jsx)("button",{id:"login-button",type:"submit",children:"Login"})]})]})},G=n(5),M=function(){var t=Object(G.g)().id,e=Object(s.c)((function(t){return t.users.allUsers})).find((function(e){return e.id===t}));return e?Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:e.username}),Object(i.jsx)("h3",{children:"Added Blogs"}),Object(i.jsx)("ul",{children:e.blogs.map((function(t){return Object(i.jsx)("li",{children:t.title},t.id)}))})]}):null},F=function(t){var e=t.blogId,n=Object(r.useState)(""),c=Object(p.a)(n,2),a=c[0],u=c[1],o=Object(s.b)(),l=function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),o(E(e,a)),u("");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Comments"}),Object(i.jsxs)("form",{onSubmit:l,children:[Object(i.jsx)("input",{id:"comment",type:"text",value:a,name:"Comment",onChange:function(t){var e=t.target;return u(e.value)}}),Object(i.jsx)("button",{id:"submit-comment",type:"submit",children:"Add Comment"})]})]})},J=function(){var t=Object(s.b)(),e=Object(G.g)().id,n=Object(s.c)((function(t){return t.blogs})).find((function(t){return t.id===e}));return n?Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:n.title}),Object(i.jsx)("a",{href:n.url,children:n.url}),Object(i.jsxs)("p",{children:[n.likes," likes ",Object(i.jsx)("button",{onClick:function(){t(function(t){return function(){var e=Object(x.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.likeBlog(t);case 2:n({type:"LIKE",data:Object(j.a)(Object(j.a)({},t),{},{likes:t.likes+1})}),n(S("You liked ".concat(t.title),!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(n))},children:"like"})]}),Object(i.jsxs)("p",{children:["Added by ",n.user.username]}),Object(i.jsx)(F,{blogId:n.id}),Object(i.jsx)("ul",{children:n.comments.map((function(t,e){return Object(i.jsx)("li",{children:t},e)}))})]}):null},W=function(){var t=Object(s.b)(),e=Object(G.f)(),n=Object(s.c)((function(t){return t.users.loggedIn})),r={paddingRight:10};return Object(i.jsxs)("nav",{children:[Object(i.jsx)(u.b,{style:r,to:"/",children:"Blogs"}),Object(i.jsx)(u.b,{style:r,to:"/users",children:"Users"}),Object(i.jsxs)("span",{children:[n.username," logged in ",Object(i.jsx)("button",{onClick:function(n){n.preventDefault(),window.localStorage.clear(),t(function(){var t=Object(x.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"LOGOUT_USER"});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.push("/")},children:"Logout"})]})]})},z=function(){var t=Object(s.c)((function(t){return t.users.loggedIn})),e=Object(s.b)();return Object(r.useEffect)((function(){e(function(){var t=Object(x.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getAll();case 2:n=t.sent,e({type:"INIT_BLOGS",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e(function(){var t=Object(x.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.getAllUsers();case 2:n=t.sent,e({type:"SET_USERS",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t,n=window.localStorage.getItem("loggedBlogappUser");if(n){var r=JSON.parse(n);e((t=r,function(){var e=Object(x.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.setToken(t.token),n({type:"LOGIN_USER",data:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}),[]),t?Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(b,{}),Object(i.jsx)(W,{}),Object(i.jsxs)(G.c,{children:[Object(i.jsx)(G.a,{path:"/blogs/:id",children:Object(i.jsx)(J,{})}),Object(i.jsx)(G.a,{path:"/users/:id",children:Object(i.jsx)(M,{})}),Object(i.jsx)(G.a,{path:"/users",children:Object(i.jsx)(d,{})}),Object(i.jsxs)(G.a,{path:"/",children:[Object(i.jsx)("div",{children:Object(i.jsx)("h1",{children:"Blogs App"})}),Object(i.jsxs)("div",{children:[Object(i.jsx)(f,{buttonLabel:"Create New Blog",children:Object(i.jsx)(N,{})}),Object(i.jsx)(o,{})]})]})]})]}):Object(i.jsxs)(f,{buttonLabel:"login",children:[Object(i.jsx)(b,{}),Object(i.jsx)(R,{})]})},K=n(19),P=n(39),Y=n(38),q=Object(K.combineReducers)({blogs:L,notifications:T,users:D}),H=Object(K.createStore)(q,Object(Y.composeWithDevTools)(Object(K.applyMiddleware)(P.a)));a.a.render(Object(i.jsx)(s.a,{store:H,children:Object(i.jsx)(u.a,{children:Object(i.jsx)(z,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.66833c61.chunk.js.map